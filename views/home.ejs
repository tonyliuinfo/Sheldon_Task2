<html>

<head>
  <%- include('partials/navbar1.ejs') %>
    <%- include('partials/header1.ejs') %>
</head>

<style>
  body {
    margin: 0;
    padding: 0;
    font-family: Arial, sans-serif;
  }

  .image-row {
    display: flex;
    flex-wrap: wrap;
    width: 100%;
    height: 650px;
    margin-top: 20px;
    overflow: hidden;
  }

  .image-row img {
    flex: 1 1 20%;
    width: 20%;
    height: auto;
    object-fit: cover;
  }

  .new-arrivals {
    margin: 50px 0;
    padding: 0 40px;
  }

  .new-arrivals h1 {
    text-align: center;
    color: #000000;
    margin-bottom: 30px;
    font-style: initial;
    font: bold;
    font-size: 40;
  }

  .product-carousel {
    display: flex;
    align-items: center;
    position: relative;
    width: 1600px;
    /* container width */
    margin: 50px auto;
    overflow: visible;
  }

  .scroll-prev,
  .scroll-next {
    width: 60px;
    height: 60px;
    background: url(./public/images/arrow.png) no-repeat;
    background-size: contain;
    position: relative;
    cursor: pointer;

  }

  .scroll-prev {
    left: -20px;
    transform: rotate(180deg);
  }

  .scroll-next {
    right: -20px;
  }

  .product-list-wrapper {
    flex: 1;
    /* take remaining space */
    overflow: hidden;
  }

  .product-list {
    display: flex;
    overflow-x: auto;
    scroll-behavior: smooth;
    width: 100%;
    scrollbar-width: none;
    /* Firefox */
    -ms-overflow-style: none;
    /* IE 10+ */
  }

  .product-list::-webkit-scrollbar {
    display: none;
    /* Chrome, Safari, Opera */
  }

  .product {
    box-sizing: border-box;
    flex: 0 0 25%;
    padding: 5px;
    text-align: center;
    transition: transform 0.3s;
    margin-right: 5px;
  }

  .product-list a {
    display: block;
    flex: 0 0 25%;
    padding: 5px;
    text-decoration: none;
    color: inherit;
  }

  .product img {
    width: 80%;
    height: 500px;
    object-fit: cover;
    border-radius: 20px;
    filter: grayscale(100%);
    transition: filter 0.3s, transform 0.3s;
  }

  .product p {
    color: #000000;
  }

  .product:hover img {
    filter: grayscale(0%);
    /* reveal color on hover */
    transform: scale(1.03);
    /* optional: same zoom effect you already had */
  }

  .product:hover {
    transform: scale(1.03);
  }
</style>

<body>
  <div class="image-row">
    <img src="/public/images/1_1_1.png" alt="Image 1">
    <img src="/public/images/1_1_2.png" alt="Image 2">
    <img src="/public/images/1_1_3.png" alt="Image 3">
    <img src="/public/images/1_1_4.png" alt="Image 4">
    <img src="/public/images/1_1_5.png" alt="Image 5">
  </div>

  <section class="new-arrivals">
    <h1>NEW ARRIVALS</h1>

    <div class="product-carousel">

      <div class="scroll-prev"></div>

      <div class="product-list" id="productList">
        <% products.forEach(product=> { %>
          <a href="/product/<%= product.id %>" style="text-decoration: none; color: inherit;">
            <div class="product">
              <img src="/public/<%= product.image %>" alt="<%= product.name %>">
              <p>
                <%= product.name %>
              </p>
              <p>$<%= product.price %>
              </p>
            </div>
          </a>
          <% }) %>
      </div>

      <div class="scroll-next"></div>

    </div>
  </section>

  <script>
    const scrollContent = document.querySelector('.product-list');
    const scrollPrev = document.querySelector('.scroll-prev');
    const scrollNext = document.querySelector('.scroll-next');

    let currentTranslate = 0;
    const scrollStep = 310; // match your item width + margin
    const visibleWidth = 900;

    scrollNext.addEventListener('click', () => {
      scrollContent.scrollBy({ left: 400, behavior: 'smooth' });
    });

    scrollPrev.addEventListener('click', () => {
      currentTranslate += scrollStep;
      scrollContent.scrollBy({ left: -400, behavior: 'smooth' });
    });
  </script>

</body>

</html>